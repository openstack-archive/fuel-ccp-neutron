[agent]

{% if neutron.enable_qos %}
extensions = qos
{% endif %}


[securitygroup]
firewall_driver = neutron.agent.firewall.NoopFirewallDriver

[sriov_nic]

#
# From neutron.ml2.sriov.agent
#

# Comma-separated list of <physical_network>:<network_device> tuples mapping
# physical network names to the agent's node-specific physical network device
# interfaces of SR-IOV physical function to be used for VLAN networks. All
# physical networks listed in network_vlan_ranges on the server should have
# mappings to appropriate interfaces on each agent. (list value)
physical_device_mappings =
{%- for dev in neutron.sriov.devices -%}
{%- for net in dev.physnets -%}
{%- if not loop.first %},{% endif -%}
{{ net }}:{{ dev.name }}
{%- endfor %}
{%- endfor %}

# Comma-separated list of <network_device>:<vfs_to_exclude> tuples, mapping
# network_device to the agent's node-specific list of virtual functions that
# should not be used for virtual networking. vfs_to_exclude is a semicolon-
# separated list of virtual functions to exclude from network_device. The
# network_device in the mapping should appear in the physical_device_mappings
# list. (list value)
exclude_devices =
{%- for dev in neutron.sriov.devices if dev.exclude_vfs -%}
{%- if not loop.first %},{% endif -%}
{{ dev.name }}:
{%- for vf in dev.exclude_vfs -%}
{%- if not loop.first %};{% endif -%}
{{ vf }}
{%- endfor %}
{%- endfor %}
