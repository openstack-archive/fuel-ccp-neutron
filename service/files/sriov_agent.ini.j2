[agent]

extensions = {% if neutron.enable_qos %}qos{% endif %}


[securitygroup]
firewall_driver = neutron.agent.firewall.NoopFirewallDriver

[sriov_nic]

#
# From neutron.ml2.sriov.agent
#

# Comma-separated list of <physical_network>:<network_device> tuples mapping
# physical network names to the agent's node-specific physical network device
# interfaces of SR-IOV physical function to be used for VLAN networks. All
# physical networks listed in network_vlan_ranges on the server should have
# mappings to appropriate interfaces on each agent. (list value)
physical_device_mappings =
{%- for net in neutron.physnets if net.sriov_nics -%}
{%- for nic in net.sriov_nics -%}
{%- if not loop.first %},{% endif -%}
{{ net.name }}:{{ nic }}
{%- endfor %}
{%- endfor %}

# Comma-separated list of <network_device>:<vfs_to_exclude> tuples, mapping
# network_device to the agent's node-specific list of virtual functions that
# should not be used for virtual networking. vfs_to_exclude is a semicolon-
# separated list of virtual functions to exclude from network_device. The
# network_device in the mapping should appear in the physical_device_mappings
# list. (list value)
exclude_devices =
{%- if neutron.sriov.exclude_vfs -%}
{%- for dev in neutron.sriov.exclude_vfs -%}
{%- if not loop.first %},{% endif -%}
{{ dev.dev_name }}:
{%- for vf in nic.vfs -%}
{%- if not loop.first %};{% endif -%}
{{ vf }}
{%- endfor %}
{%- endfor %}
{%- endif -%}
